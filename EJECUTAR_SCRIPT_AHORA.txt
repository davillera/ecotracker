â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     ğŸš¨ EJECUTAR ESTE SCRIPT AHORA - Sistema de Amigos       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ LINK DIRECTO (Click aquÃ­):
   https://supabase.com/dashboard/project/vrusokequxdingvujzvc/sql/new

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš¡ PASOS SIMPLES (5 minutos):

1ï¸âƒ£  Click en el link de arriba
   â†’ Se abrirÃ¡ el SQL Editor de Supabase

2ï¸âƒ£  Abre el archivo: database/FIX_FRIENDS_RLS.sql
   â†’ EstÃ¡ en tu carpeta ecotracker/database/
   
3ï¸âƒ£  Selecciona TODO el contenido (Ctrl+A)
   â†’ Copia (Ctrl+C)

4ï¸âƒ£  Pega en el SQL Editor de Supabase (Ctrl+V)

5ï¸âƒ£  Click en el botÃ³n verde "Run"
   â†’ Espera 5-10 segundos

âœ… Â¡LISTO! VerÃ¡s "Success" en verde

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” Â¿QUÃ‰ HACE EL SCRIPT?

âœ“ Agrega cÃ³digos de 6 caracteres (ABC123)
âœ“ Arregla las polÃ­ticas RLS de friends
âœ“ Permite buscar usuarios por cÃ³digo
âœ“ Permite ver datos de amigos para el ranking

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš ï¸  ERRORES COMUNES (son normales):

Si ves errores como:
  â€¢ "function already exists" â†’ NORMAL, ignÃ³ralo
  â€¢ "policy already exists" â†’ NORMAL, ignÃ³ralo
  â€¢ "column already exists" â†’ NORMAL, ignÃ³ralo

El script tiene DROP IF EXISTS para manejar estos casos.

Solo preocÃºpate si ves:
  âŒ "permission denied"
  âŒ "syntax error"

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… VERIFICAR QUE FUNCIONÃ“:

DespuÃ©s de ejecutar el script, corre esto en el mismo SQL Editor:

```sql
-- Ver cÃ³digos generados
SELECT name, friend_code FROM public.profiles;
```

DeberÃ­as ver algo como:
  | name    | friend_code |
  |---------|-------------|
  | Juan    | ABC123      |
  | MarÃ­a   | XYZ789      |

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ PROBAR EN LA APP:

1. Cierra y abre la app completamente
2. Ve a Perfil â†’ VerÃ¡s tu cÃ³digo (ej: ABC123)
3. Comparte tu cÃ³digo con un amigo
4. Tu amigo va a "Amigos" e ingresa tu cÃ³digo
5. Â¡DeberÃ­an verse mutuamente! ğŸ‰

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ†˜ SI TIENES PROBLEMAS:

1. Copia el error exacto que ves
2. Ejecuta esto y copia el resultado:
   ```sql
   SELECT * FROM pg_policies WHERE tablename = 'friends';
   ```
3. Comparte ambos

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š DOCUMENTACIÃ“N COMPLETA:

- ARREGLAR_AMIGOS_AHORA.md â†’ GuÃ­a detallada
- SOLUCION_RLS_AMIGOS.md â†’ ExplicaciÃ³n tÃ©cnica
- database/FIX_FRIENDS_RLS.sql â†’ Script SQL

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

         ğŸš€ Â¡Ejecuta el script ahora y arregla los amigos!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
